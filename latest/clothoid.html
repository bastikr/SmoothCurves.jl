<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Clothoid · SmoothCurves.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>SmoothCurves.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="index.html">SmoothCurves.jl</a></li><li class="current"><a class="toctext" href="clothoid.html">Clothoid</a><ul class="internal"><li><a class="toctext" href="#Definition-1">Definition</a></li><li><a class="toctext" href="#Properties-1">Properties</a></li><li><a class="toctext" href="#Clothoid-Fitting-1">Clothoid Fitting</a></li></ul></li><li><a class="toctext" href="arc.html">Arc</a></li><li><a class="toctext" href="api.html">API</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href="clothoid.html">Clothoid</a></li></ul><a class="edit-page" href="https://github.com/bastikr/SmoothCurves.jl/blob/master/docs/src/clothoid.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Clothoid</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Clothoid-1" href="#Clothoid-1">Clothoid</a></h1><pre><code class="language-">using SmoothCurves # hide

using Plots # hide

dmax = 1.5 # hide
p0 = [-6, 0] # hide
p1 = [0.0, 0.0] # hide
p2 = [2, 5] # hide
C = SmoothCurves.construct_curve2(dmax, p0, p1, p2) # hide
n0 = normalize([-(p1[2] - p0[2]), (p1[1] - p0[1])]) # hide

λ = C.curves[2].λ # hide
phi = SmoothCurves.deviation(p1-p0, p2-p1) # hide
θ = phi/2 # hide
Fcos, Fsin = SmoothCurves.Fresnel(1, sqrt(θ)) # hide
smax_ = sqrt(abs(θ/λ)) # hide
Δy = smax_/sqrt(θ)*Fsin # hide
Δx = smax_/sqrt(θ)*Fcos # hide
δ = Δy*tan(θ) # hide
d = sqrt(δ^2 + Δy^2) # hide

plt = plot(ticks=false, border=false, axis=false) # hide

# Plot clothoids # hide
plot!(C, lc=1, lw=2) # hide
p_begin = point(C.curves[2], 0) # hide
p_split = point(C.curves[3], 0) # hide
p_end = point(C.curves[4], 0) # hide
scatter!([p_begin[1], p_split[1], p_end[1]], [p_begin[2], p_split[2], p_end[2]], # hide
        color=1, label=&quot;&quot;) # hide

# Plot polygon lines # hide
C_l0 = Line(p0, p1-p0, norm(p1-p0)) # hide
C_l1 = Line(p1, p2-p1, norm(p2-p1)) # hide
plot!(C_l0, lc=:black) # hide
plot!(C_l1, lc=:black) # hide

p_annotate = p1 - (δ + 0.5*Δx)*C_l0.direction - 0.2*n0 # hide
annotate!(p_annotate..., text(&quot;\\Delta x&quot;, 8, :center)) # hide

p_annotate = p1 - 0.5*δ*C_l0.direction - 0.2*n0 # hide
annotate!(p_annotate..., text(&quot;\\delta&quot;, 8, :center)) # hide

C_l0_extension = Line(p1, p1-p0, dot(C_l0.direction, p2-p1)) # hide
plot!(C_l0_extension, lc=:black, ls=:dash) # hide

# Plot normal to first line # hide
C_l0_normal = Line(p1 - δ*C_l0.direction, n0, Δy) # hide
plot!(C_l0_normal, lc=:black, ls=:solid) # hide
p_annotate = C_l0_normal.origin - 0.2*C_l0.direction + 0.5*n0*C_l0_normal.length # hide
annotate!(p_annotate..., text(&quot;\\Delta y&quot;, 8, :center)) # hide

# Plot mindistance # hide
C_l_mindistance = Line(p1, -C_l0.direction + C_l1.direction, sqrt(δ^2 + Δy^2)) # hide
plot!(C_l_mindistance, lc=:black, ls=:solid) # hide
p_annotate = p1 + 0.5*C_l_mindistance.direction*C_l_mindistance.length + [0.1, 0.1] # hide
annotate!(p_annotate..., text(&quot;d&quot;, 8, :center)) # hide

# Plot theta angle # hide
r_thetaangle = 0.3 # hide
C_thetaangle = Arc(p1 + C_l_mindistance.length*C_l_mindistance.direction, r_thetaangle, # hide
    SmoothCurves.deviation(C_l0.direction, -n0), # hide
    SmoothCurves.deviation(C_l0.direction, -C_l_mindistance.direction)) # hide
plot!(C_thetaangle, lc=:black, ls=:solid) # hide
p_annotate = C_thetaangle.origin - (r_thetaangle+0.2)*normalize(C_l_mindistance.direction + n0) # hide
annotate!(p_annotate..., text(&quot;\\theta&quot;, 8, :center)) # hide

# Plot phi angle # hide
r_phiangle = 0.5 # hide
C_phiangle = Arc(p1, r_phiangle, tangentangle(C_l0, 0.), tangentangle(C_l1, 0.)) # hide
plot!(C_phiangle, lc=:black, ls=:dash) # hide
p_annotate = p1 + (r_phiangle + 0.2)*normalize(C_l0.direction + C_l1.direction) # hide
annotate!(p_annotate..., text(&quot;\\phi&quot;, 8, :center)) # hide</code></pre><h2><a class="nav-anchor" id="Definition-1" href="#Definition-1">Definition</a></h2><p>The clothoid in standard orientation is defined via the general Fresnel integrals</p><div>\[x(s) = \int_0^s \cos(\lambda t^2) \mathrm{d}t
\\
y(s) = \int_0^s \sin(\lambda t^2) \mathrm{d}t\]</div><h2><a class="nav-anchor" id="Properties-1" href="#Properties-1">Properties</a></h2><div>\[l(s) = s
\\
\frac{\mathrm{d}l}{\mathrm{d}s} = 1
\\
\kappa(s) = 2 \lambda s
\\
\frac{\mathrm{d} \kappa}{\mathrm{d} s} = 2 \lambda
\\
\theta(s) = \lambda s^2\]</div><h2><a class="nav-anchor" id="Clothoid-Fitting-1" href="#Clothoid-Fitting-1">Clothoid Fitting</a></h2><div>\[x(s) = \int_0^s \cos(\lambda t^2) \mathrm{d}t
     = \int_0^s \cos(\theta \frac{t^2}{s^2}) \mathrm{d}t
     = \frac{1}{\sqrt{\theta}} s \int_0^\sqrt{\theta} \cos(t^2) \mathrm{d}t
     = \frac{1}{\sqrt{\theta}} s \mathrm{F}_{\cos}(\sqrt{\theta})
\\
y(s) = \int_0^s \sin(\lambda t^2) \mathrm{d}t
     = \int_0^s \sin(\theta \frac{t^2}{s^2}) \mathrm{d}t
     = \frac{1}{\sqrt{\theta}} s \int_0^\sqrt{\theta} \sin(t^2) \mathrm{d}t
     = \frac{1}{\sqrt{\theta}} s \mathrm{F}_{\sin}(\sqrt{\theta})\]</div><p>Minimum distance from the corner point</p><div>\[d = \frac{y}{\cos{\theta}}
  = s \frac{\mathrm{F}_{\sin}(\sqrt{\theta})}{\sqrt{\theta} \cos{\theta}}\]</div><p>Given a specific distance <span>$d$</span> choose parameter <span>$s$</span> to</p><div>\[s = d \frac{\sqrt{\theta} \cos{\theta}}{\mathrm{F}_{\sin}(\sqrt{\theta})}\]</div><p>The total shift in <span>$x$</span> direction is then</p><div>\[\mathrm{shift} = d (\sin \theta + \cos \theta \frac{\mathrm{F}_{\cos}(\sqrt{\theta})}{\mathrm{F}_{\sin}(\sqrt{\theta})})\]</div><footer><hr/><a class="previous" href="index.html"><span class="direction">Previous</span><span class="title">SmoothCurves.jl</span></a><a class="next" href="arc.html"><span class="direction">Next</span><span class="title">Arc</span></a></footer></article></body></html>
